<h2>
  <%= link_to 'Add New +', new_post_path, class: 'header-menu' %>
  My Posts
</h2>
<ul>
<% @posts.each do |post| %>
<li>
<%= link_to post.title, post_path(post.id) %>
<span class="command_class">
<%= link_to 'Edit', edit_post_path(post.id), class: 'command'%>
<%= link_to 'x', 
post_path(post.id), 
method: :delete, 
class: 'command_x',
data: { confirm: 'Sure?'}%>
</span>
</li>
<% end %>
</ul>

<div id="target"></div>
<input type="text" id="keyword">
<button id="search">Search</button>
<script>
    function initMap() {
      'use strict';

      let target = document.getElementById('target');
      // let geocoder = new google.maps.Geocoder();
      let map;
      // let tokyo = {lat: 35.681167, lng: 139.767052};
      let service;
      // let infoWindow;
      // let marker;

      if (!navigator.geolocation) {
        alert('Geolocation not supported!');
        return;
      }

      navigator.geolocation.getCurrentPosition(function(position) {
        let current = {lat: position.coords.latitude, lng: position.coords.longitude};
        map = new google.maps.Map(target, {
          center: current,
          zoom: 18
        });
        document.getElementById('search').addEventListener('click', function() {
        service = new google.maps.places.PlacesService(map);
        service.nearbySearch({
          location: current,
          radius: '500',
          name: document.getElementById('keyword').value
        }, function(results, status){
          let i;
          if (status === google.maps.places.PlacesServiceStatus.OK) {
            for (i = 0; i < results.length; i++) {
              new google.maps.Marker({
                map: map,
                position: results[i].geometry.location,
                title: results[i].name
              });
            }
          } else {
            alert('Failed: ' + status);
            return;
          }
        });
      });
      }, function() {
        alert('Geolocation failed!');
        return;
      });
    }
</script>